<html lang="ru">
  <head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>OpenWS</title>
  </head>
  <body>
    <div class="navbar">
   <input type="button" onclick="connect()" id="add" value="">
   </div>
   <div class="wrapper">
   <div id="messages"></div>
   </div>
   <input type="text" class="msbox" id="msgbox">
   <input type="button" class="send" value="=>" onclick="send()">
    <style>
    * {
      margin: 0;
      padding: 0;
    }
    
    html,body {
      height: 100%;
    }
    .navbar {
      background: lightgreen;
      border-radius: 0px 0px 10px 10px;
      height: 30px;
    }
    
    #add {
      background: lightgreen;
      border-color: white;
      border-radius: 0px 0px 0px 10px;
      width: 30px;
     height: 100%;
      margin: 0;
      padding: 0;
      border-width: 1px;
    }
    
    
    
    .msbox {
    height: 30px;
    width: 90%;
    
    }
    .send {
     height: 30px;
    }
    
    .messages {
      display: table-row;
      height: 90%;
    }
    
    .wrapper {
      display: table;
      height: 90%;
    }
    </style>
    
    <noscript>
      <style>
      .wrapper {
        display: none;
      }
      .navbar {
        display: none;
      }
      </style>
    </noscript>
    
    <script>
    var socket;
    var input = document.getElementsByClassName("msbox").item(0)
    input.disabled = true;
    var btn = document.getElementsByClassName("send").item(0)
      btn.disabled = true;
    function connect() {
      
      if(socket) socket.close(1000,"User closed the connection")
      var url;
        url = prompt("WebSocket url like 'ws://example.com");
        socket = new WebSocket(url);
      
     

      socket.onopen = function() {
        input.disabled = false;    
        btn.disabled = false;
      }
      
      socket.onmessage = function(e){
        var box = document.createElement('div');
        box.style.color = "#"+((1<<24)*Math.random()|0).toString(16);
        var message = document.createTextNode(e.data)
        box.appendChild(message);
        document.getElementById('messages').appendChild(box)
      }
      
      socket.onclose = function(e){

        alert("Server closed by code " + e.code + " and reason: " + e.reason);
        input.disabled = true;
        btn.disabled = true;
      }
      
   
    }
    
    function send() {
      socket.send(document.getElementById("msgbox").value)
      document.getElementById("msgbox").value = "";
    }
    </script>
  </body>
  
</html>